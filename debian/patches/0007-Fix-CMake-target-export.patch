From: =?utf-8?q?Timo_R=C3=B6hling?= <timo.roehling@fkie.fraunhofer.de>
Date: Mon, 6 Apr 2020 18:58:53 +0200
Subject: Fix CMake target export

---
 CMakeLists.txt | 16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 7ca2df6..41a5e15 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -352,10 +352,13 @@ else()
 endif()
 
 set(
-    qhull_TARGETS_INSTALL
+    qhull_EXPORTED_TARGETS_INSTALL
         ${qhull_CPP} ${qhull_STATIC} ${qhull_STATICR} ${qhull_SHAREDR}
+        ${qhull_SHARED})
+set(
+    qhull_OTHER_TARGETS_INSTALL
         qhull rbox qconvex qdelaunay qvoronoi qhalf
-        ${qhull_SHARED} ${qhull_SHAREDP}  # Deprecated, use qhull_r instead
+	${qhull_SHAREDP}  # Deprecated, use qhull_r instead
 )
 set(
     qhull_TARGETS_TEST   # Unused
@@ -619,7 +622,12 @@ add_test(NAME user_eg3
 # Define install
 # ---------------------------------------
 
-install(TARGETS ${qhull_TARGETS_INSTALL} EXPORT QhullTargets
+install(TARGETS ${qhull_EXPORTED_TARGETS_INSTALL} EXPORT QhullTargets
+        RUNTIME DESTINATION ${BIN_INSTALL_DIR}
+        LIBRARY DESTINATION ${LIB_INSTALL_DIR}
+        ARCHIVE DESTINATION ${LIB_INSTALL_DIR}
+        INCLUDES DESTINATION include)
+install(TARGETS ${qhull_OTHER_TARGETS_INSTALL}
         RUNTIME DESTINATION ${BIN_INSTALL_DIR}
         LIBRARY DESTINATION ${LIB_INSTALL_DIR}
         ARCHIVE DESTINATION ${LIB_INSTALL_DIR}
@@ -643,7 +651,7 @@ configure_file(${PROJECT_SOURCE_DIR}/build/config.cmake.in
   @ONLY
 )
 
-set(ConfigPackageLocation lib/cmake/Qhull)
+set(ConfigPackageLocation ${LIB_INSTALL_DIR}/cmake/Qhull)
 install(EXPORT QhullTargets
   FILE
     QhullTargets.cmake
